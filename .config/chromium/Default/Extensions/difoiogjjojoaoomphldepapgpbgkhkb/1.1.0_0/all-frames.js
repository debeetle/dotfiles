"use strict";(()=>{var te=Object.create;var I=Object.defineProperty;var se=Object.getOwnPropertyDescriptor;var ne=Object.getOwnPropertyNames;var ie=Object.getPrototypeOf,oe=Object.prototype.hasOwnProperty;var ae=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var le=(e,n,g,u)=>{if(n&&typeof n=="object"||typeof n=="function")for(let c of ne(n))!oe.call(e,c)&&c!==g&&I(e,c,{get:()=>n[c],enumerable:!(u=se(n,c))||u.enumerable});return e};var q=(e,n,g)=>(g=e!=null?te(ie(e)):{},le(n||!e||!e.__esModule?I(g,"default",{value:e,enumerable:!0}):g,e));var M=ae((K,G)=>{(function(e,n){if(typeof define=="function"&&define.amd)define("webextension-polyfill",["module"],n);else if(typeof K<"u")n(G);else{var g={exports:{}};n(g),e.browser=g.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:K,function(e){"use strict";if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){let n="The message port closed before a response was received.",g=u=>{let c={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(c).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class C extends WeakMap{constructor(s,o=void 0){super(o),this.createItem=s}get(s){return this.has(s)||this.set(s,this.createItem(s)),super.get(s)}}let J=t=>t&&typeof t=="object"&&typeof t.then=="function",$=(t,s)=>(...o)=>{u.runtime.lastError?t.reject(new Error(u.runtime.lastError.message)):s.singleCallbackArg||o.length<=1&&s.singleCallbackArg!==!1?t.resolve(o[0]):t.resolve(o)},k=t=>t==1?"argument":"arguments",X=(t,s)=>function(a,...m){if(m.length<s.minArgs)throw new Error(`Expected at least ${s.minArgs} ${k(s.minArgs)} for ${t}(), got ${m.length}`);if(m.length>s.maxArgs)throw new Error(`Expected at most ${s.maxArgs} ${k(s.maxArgs)} for ${t}(), got ${m.length}`);return new Promise((A,d)=>{if(s.fallbackToNoCallback)try{a[t](...m,$({resolve:A,reject:d},s))}catch{a[t](...m),s.fallbackToNoCallback=!1,s.noCallback=!0,A()}else s.noCallback?(a[t](...m),A()):a[t](...m,$({resolve:A,reject:d},s))})},O=(t,s,o)=>new Proxy(s,{apply(a,m,A){return o.call(m,t,...A)}}),w=Function.call.bind(Object.prototype.hasOwnProperty),T=(t,s={},o={})=>{let a=Object.create(null),m={has(d,i){return i in t||i in a},get(d,i,p){if(i in a)return a[i];if(!(i in t))return;let l=t[i];if(typeof l=="function")if(typeof s[i]=="function")l=O(t,t[i],s[i]);else if(w(o,i)){let y=X(i,o[i]);l=O(t,t[i],y)}else l=l.bind(t);else if(typeof l=="object"&&l!==null&&(w(s,i)||w(o,i)))l=T(l,s[i],o[i]);else if(w(o,"*"))l=T(l,s[i],o["*"]);else return Object.defineProperty(a,i,{configurable:!0,enumerable:!0,get(){return t[i]},set(y){t[i]=y}}),l;return a[i]=l,l},set(d,i,p,l){return i in a?a[i]=p:t[i]=p,!0},defineProperty(d,i,p){return Reflect.defineProperty(a,i,p)},deleteProperty(d,i){return Reflect.deleteProperty(a,i)}},A=Object.create(t);return new Proxy(A,m)},P=t=>({addListener(s,o,...a){s.addListener(t.get(o),...a)},hasListener(s,o){return s.hasListener(t.get(o))},removeListener(s,o){s.removeListener(t.get(o))}}),L=new C(t=>typeof t!="function"?t:function(o){let a=T(o,{},{getContent:{minArgs:0,maxArgs:0}});t(a)}),j=new C(t=>typeof t!="function"?t:function(o,a,m){let A=!1,d,i=new Promise(b=>{d=function(f){A=!0,b(f)}}),p;try{p=t(o,a,d)}catch(b){p=Promise.reject(b)}let l=p!==!0&&J(p);if(p!==!0&&!l&&!A)return!1;let y=b=>{b.then(f=>{m(f)},f=>{let E;f&&(f instanceof Error||typeof f.message=="string")?E=f.message:E="An unexpected error occurred",m({__mozWebExtensionPolyfillReject__:!0,message:E})}).catch(f=>{})};return y(l?p:i),!0}),ee=({reject:t,resolve:s},o)=>{u.runtime.lastError?u.runtime.lastError.message===n?s():t(new Error(u.runtime.lastError.message)):o&&o.__mozWebExtensionPolyfillReject__?t(new Error(o.message)):s(o)},F=(t,s,o,...a)=>{if(a.length<s.minArgs)throw new Error(`Expected at least ${s.minArgs} ${k(s.minArgs)} for ${t}(), got ${a.length}`);if(a.length>s.maxArgs)throw new Error(`Expected at most ${s.maxArgs} ${k(s.maxArgs)} for ${t}(), got ${a.length}`);return new Promise((m,A)=>{let d=ee.bind(null,{resolve:m,reject:A});a.push(d),o.sendMessage(...a)})},re={devtools:{network:{onRequestFinished:P(L)}},runtime:{onMessage:P(j),onMessageExternal:P(j),sendMessage:F.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:F.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},S={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return c.privacy={network:{"*":S},services:{"*":S},websites:{"*":S}},T(u,re,c)};e.exports=g(chrome)}else e.exports=globalThis.browser})});var x=q(M());var _=q(M()),Ae=!/ChatGPT/.test(_.default.runtime.getManifest().name);var de=_.default.runtime.getManifest().version;var B="https://gochitchat.ai",R={origin:B,api:`${B}/api`};var N=(r=>(r.English="en",r["Chinese(Simplified)"]="zh_CN",r["Chinese(Traditional)"]="zh_TW",r.Spanish="es",r.French="fr",r.Japanese="ja",r.German="de",r.Portuguese="pt",r.Arabic="ar",r.Russian="ru",r.Italian="it",r.Korean="ko",r.Hindi="hi",r.Dutch="nl",r.Polish="pl",r.Amharic="am",r.Bulgarian="bg",r.Bengali="bn",r.Catalan="ca",r.Czech="cs",r.Danish="da",r.Greek="el",r.Estonian="et",r.Persian="fa",r.Finnish="fi",r.Filipino="fil",r.Gujarati="gu",r.Hebrew="he",r.Croatian="hr",r.Hungarian="hu",r.Indonesian="id",r.Kannada="kn",r.Lithuanian="lt",r.Latvian="lv",r.Malayalam="ml",r.Marathi="mr",r.Malay="ms",r.Norwegian="no",r.Romanian="ro",r.Slovak="sk",r.Slovenian="sl",r.Serbian="sr",r.Swedish="sv",r.Swahili="sw",r.Tamil="ta",r.Telugu="te",r.Thai="th",r.Turkish="tr",r.Ukrainian="uk",r.Urdu="ur",r.Vietnamese="vi",r))(N||{}),me={en:"English",zh_CN:"\u4E2D\u6587(\u7B80\u4F53)",zh_TW:"\u4E2D\u6587(\u7E41\u9AD4)",es:"Espa\xF1ol",fr:"Fran\xE7ais",ja:"\u65E5\u672C\u8A9E",de:"Deutsch",pt:"Portugu\xEAs",ar:"\u0627\u0644\u0639\u0631\u0628\u064A\u0629",ru:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439",it:"Italiano",ko:"\uD55C\uAD6D\uC5B4",hi:"\u0939\u093F\u0928\u094D\u0926\u0940",nl:"Nederlands",pl:"Polski",am:"\u12A0\u121B\u122D\u129B",bg:"\u0411\u044A\u043B\u0433\u0430\u0440\u0441\u043A\u0438",bn:"\u09AC\u09BE\u0982\u09B2\u09BE",ca:"Catal\xE0",cs:"\u010Ce\u0161tina",da:"Dansk",el:"\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC",et:"Eesti",fa:"\u0641\u0627\u0631\u0633\u06CC",fi:"Suomi",fil:"Filipino",gu:"\u0A97\u0AC1\u0A9C\u0AB0\u0ABE\u0AA4\u0AC0",he:"\u05E2\u05D1\u05E8\u05D9\u05EA",hr:"Hrvatski",hu:"Magyar",id:"Indonesia",kn:"\u0C95\u0CA8\u0CCD\u0CA8\u0CA1",lt:"Lietuvi\u0173",lv:"Latvie\u0161u",ml:"\u0D2E\u0D32\u0D2F\u0D3E\u0D33\u0D02",mr:"\u092E\u0930\u093E\u0920\u0940",ms:"Bahasa Melayu",no:"Norsk",ro:"Rom\xE2n\u0103",sk:"Sloven\u010Dina",sl:"Sloven\u0161\u010Dina",sr:"\u0421\u0440\u043F\u0441\u043A\u0438",sv:"Svenska",sw:"Kiswahili",ta:"\u0BA4\u0BAE\u0BBF\u0BB4\u0BCD",te:"\u0C24\u0C46\u0C32\u0C41\u0C17\u0C41",th:"\u0E44\u0E17\u0E22",tr:"T\xFCrk\xE7e",uk:"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430",ur:"\u0627\u0631\u062F\u0648",vi:"Ti\u1EBFng Vi\u1EC7t"},pe=Object.entries(N).reduce((e,[n,g])=>(e[g]=n,e),{}),ue=Object.entries(N).map(([e,n])=>({label:e,value:n})),fe=Object.entries(me).map(([e,n])=>({label:n,value:e}));var he={pricing:`${R.origin}/pricing`,login:`${R.origin}/login`,myChats:`${R.origin}/mychats`,openaiChat:"https://chat.openai.com",openaiLogin:"https://platform.openai.com/login",openaiSignup:"https://platform.openai.com/signup",openaiApiKey:"https://platform.openai.com/account/api-keys",openaiApiSession:"https://chat.openai.com/api/auth/session",edgeStore:"https://microsoftedge.microsoft.com/addons/detail/sider-ai-sidebar/dhoenijjpgpeimemopealfcbiecgceod",chromeStoreReview:"https://chrome.google.com/webstore/detail/chatgpt-sidebar/difoiogjjojoaoomphldepapgpbgkhkb/reviews",chromeStore:"https://chrome.google.com/webstore/detail/chatgpt-sidebar/difoiogjjojoaoomphldepapgpbgkhkb",weChatQrCode:"https://gochitchat.ai/resource/weixin/qrcode.jpeg",producthuntPromoteApi:"https://gochitchat.ai/resource/promotion/extension-promote.json"},D={sidebarShortcut:{key:"p",keyCode:80,metaKey:!0,ctrlKey:!0,altKey:!1,shiftKey:!1},sidebarFab:!0,selectionSidebarFab:!0};function U(e,n){return!(e.key!==n.key||(e.metaKey!==n.metaKey||e.ctrlKey!==n.ctrlKey)&&!e.metaKey&&!e.ctrlKey||e.shiftKey!==!!n.shiftKey||e.altKey!==!!n.altKey||e.target?.dataset.preventsidershortcut)}var h=D.sidebarShortcut;function Q(e){h.key=e.key,h.keyCode=e.keyCode,h.metaKey=e.metaKey,h.ctrlKey=e.ctrlKey,h.altKey=e.altKey,h.shiftKey=e.shiftKey}function W(e){if(e.sidebarShortcut){let n=e.sidebarShortcut.newValue;Q(n)}}function H(e){if(e.key==="Escape"){x.default.runtime.id&&x.default.runtime.sendMessage({type:"POPUP_OPEN",isShow:!1});return}U(e,h)&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),x.default.runtime.id&&x.default.runtime.sendMessage({type:"POPUP_OPEN"}))}var V="ALL_FRAMES_LISTEN",v=[];function Z(e=window){e.addEventListener("keydown",H,!0),e[V]=!0}function Y(e=window){e.removeEventListener("keydown",H,!0)}function z(e){[document,document.querySelector("chatgpt-sidebar")?.shadowRoot].forEach(g=>{g&&g.querySelectorAll("iframe").forEach(u=>{let c=u.contentWindow;try{c&&c[V]!=!0&&(Z(c),v.push(()=>Y(c)))}catch{}})})}function ge(){x.default.storage.local.get({sidebarShortcut:h}).then(({sidebarShortcut:e})=>Q(e)),x.default.storage.local.onChanged.addListener(W),window.addEventListener("blur",z),v.push(()=>x.default.storage.local.onChanged.removeListener(W)),v.push(()=>window.removeEventListener("blur",z)),Z(),v.push(()=>Y())}ge();})();
